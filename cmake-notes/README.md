# How to use CMake
> Learning using ChatGPT

Order of executing commands:
1. `cmake ..` (should be run from our `/build` directory)
2. `make` (from the same `/build` directory)

## What does 'cmake ..' do?

### **What `cmake ..` command does**
1. **Finds `CMakeLists.txt`:**  
   The `..` tells CMake to look for the `CMakeLists.txt` file in the parent directory (your project's root folder).

2. **Processes `CMakeLists.txt`:**  
   CMake reads the `CMakeLists.txt` file to:
   - Define the project structure.
   - Specify source files, include directories, and compiler options.
   - Locate required libraries (like OpenGL or GLFW in your case).

3. **Generates Build Files:**  
   CMake creates platform-specific build files.  
   - On Linux, it generates a `Makefile` (used by `make`).
   - On Windows, it could generate Visual Studio project files.
   - On macOS, it could create Xcode project files.

4. **Checks Dependencies:**  
   CMake ensures all necessary tools and libraries are available (e.g., OpenGL, GLFW). If a dependency is missing, it stops with an error.

5. **Configures the Build Directory:**  
   CMake organizes the build process in the `/build` directory, keeping your source folder clean.

### **Output of `cmake ..`**
1. **Generated Files in `/build`:**
   - `Makefile`: Instructions for `make` to compile and link the project.
   - `CMakeCache.txt`: Stores CMake's configuration and cached variables.
   - Other auxiliary files for tracking dependencies.

2. **Logs in Terminal:**  
   CMake outputs messages like:
   - Detected compilers (e.g., GCC or Clang).
   - Found libraries (e.g., OpenGL, GLFW).
   - Configuration success or errors.

### **Why It’s Necessary Before `make`**
`make` relies on the `Makefile` generated by `cmake ..`. Without running `cmake ..` first, `make` wouldn’t know:
- Which source files to compile.
- Which libraries to link.
- Where to place the final executable.

### **Command Breakdown**
- `cmake`: Invokes the CMake tool.
- `..`: Specifies the directory containing `CMakeLists.txt`.

## What does 'make' do?

When you execute the `make` command, it uses the `Makefile` generated by CMake to build your project. Here’s what happens:

### **1. Build Process Overview**
- **CMake Generates the Makefile:**  
  During the `cmake ..` step, CMake creates a `Makefile` based on your `CMakeLists.txt`. The `Makefile` contains rules for compiling and linking your project.

- **Make Executes Build Rules:**  
  When you run `make`, it reads the `Makefile` and executes the specified steps to build your project.

### **2. Key Steps in `make`**
1. **Compiling Source Files:**  
   Each `.cpp` or `.c` file listed in `add_executable` or `add_library` is compiled into an object file (`.o`).  
   Example command executed by `make`:
   ```bash
   g++ -o CMakeFiles/tiny_opengl_game_engine.dir/src/main.cpp.o -c src/main.cpp
   ```

2. **Linking Object Files:**  
   After compiling, `make` links all object files to create the final executable.  
   Example linking command:
   ```bash
   g++ CMakeFiles/tiny_opengl_game_engine.dir/src/main.cpp.o -o tiny_opengl_game_engine -lGL -lglfw
   ```

3. **Dependency Tracking:**  
   `make` ensures that only modified files are recompiled. If a source file or its dependencies change, only that file is rebuilt.

### **3. Output of `make`**
- **Compiled Executable:**  
  The result is an executable file, typically placed in the `build` directory by CMake.

  Example location:  
  ```
  build/tiny_opengl_game_engine
  ```

- **Error/Success Messages:**  
  If there’s an issue, `make` will show errors related to compilation, linking, or missing dependencies.

### **4. No File Directly Executed**
- `make` itself doesn’t execute any `.c` or `.cpp` file. It **compiles and links** the files into an executable.
- To run your program after building, execute the generated binary:
  ```bash
  ./build/tiny_opengl_game_engine
  ```

Let me know if you'd like more details on any part of this process!